--- 
#---------------------------------------------# 
# MConnect - Centrul de Guvernare Electronica #
#---------------------------------------------#

- name: Generate certificate
  command: 'openssl req -new -nodes -x509 -subj /C=MD/ST=Chisinau/L=Chisinau/O=EGC/CN={{ HostName }} -days 73000 -keyout {{ WSO2FileRepository }}{{ CertificateKeyName }}.key -out {{ WSO2FileRepository }}{{ CertificateKeyName }}.crt -extensions v3_ca creates={{ WSO2FileRepository }}{{ CertificateKeyName }}.crt'
  
- name: Import certificate into wso2 keystore
  command: 'keytool -import -alias "{{ HostName }}"  -file "{{ WSO2FileRepository }}{{ CertificateKeyName }}.crt" -keystore "{{ WSO2CarbonHome }}/repository/resources/security/client-truststore.jks"'